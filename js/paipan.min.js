"use strict";function paipan(){this.J=120,this.W=35,this.JQ=new Array,this.zwz=!0,this.synmonth=29.530588853,this.debug=!0,this.wkd=["日","一","二","三","四","五","六"],this.gz=["甲子","乙丑","丙寅","丁卯","戊辰","己巳","庚午","辛未","壬申","癸酉","甲戌","乙亥","丙子","丁丑","戊寅","己卯","庚辰","辛巳","壬午","癸未","甲申","乙酉","丙戌","丁亥","戊子","己丑","庚寅","辛卯","壬辰","癸巳","甲午","乙未","丙申","丁酉","戊戌","己亥","庚子","辛丑","壬寅","癸卯","甲辰","乙巳","丙午","丁未","戊申","己酉","庚戌","辛亥","壬子","癸丑","甲寅","乙卯","丙辰","丁巳","戊午","己未","庚申","辛酉","壬戌","癸亥"],this.ctg=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],this.cdz=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],this.csx=["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],this.jq=["春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至","小寒","大寒","立春","雨水","惊蛰"],this.dxy=["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"],this.dxd=["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","廿十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"],this.dxs=["零","一","二","三","四","五","六","七","八","九"],this.cwx=["金","水","木","火","土"],this.xb=["男","女"],this.mz=["乾","坤"],this.cyy=["阳","阴"],this.lx=["命旺","印重","煞重","财旺","伤官"],this.wxtg=[2,2,3,3,4,4,0,0,1,1],this.wxdz=[1,4,2,2,4,3,3,4,0,0,4,1],this.ssq=["正印","偏印","比肩","劫財","傷官","食神","正財","偏財","正官","偏官"],this.sss=["印","卩","比","劫","伤","食","财","才","官","杀"],this.dgs=[[2,3,1,0,9,8,7,6,5,4],[3,2,0,1,8,9,6,7,4,5],[5,4,2,3,1,0,9,8,7,6],[4,5,3,2,0,1,8,9,6,7],[7,6,5,4,2,3,1,0,9,8],[6,7,4,5,3,2,0,1,8,9],[9,8,7,6,5,4,2,3,1,0],[8,9,6,7,4,5,3,2,0,1],[1,0,9,8,7,6,5,4,2,3],[0,1,8,9,6,7,4,5,3,2]],this.dzs=[[0,1,8,9,6,7,4,5,3,2],[6,7,4,5,3,2,0,1,8,9],[2,3,1,0,9,8,7,6,5,4],[3,2,0,1,8,9,6,7,4,5],[7,6,5,4,2,3,1,0,9,8],[5,4,2,3,1,0,9,8,7,6],[4,5,3,2,0,1,8,9,6,7],[6,7,4,5,3,2,0,1,8,9],[9,8,7,6,5,4,2,3,1,0],[8,9,6,7,4,5,3,2,0,1],[7,6,5,4,2,3,1,0,9,8],[1,0,9,8,7,6,5,4,2,3]],this.cxz=["摩羯","水瓶","双鱼","白羊","金牛","双子","巨蟹","狮子","处女","天秤","天蝎","射手"],this.zcg=[[9,-1,-1],[5,9,7],[0,2,4],[1,-1,-1],[4,1,9],[2,4,6],[3,5,-1],[5,1,3],[6,8,4],[7,-1,-1],[4,7,3],[8,0,-1]],this.czs=["長生(強)","沐浴(凶)","冠帶(吉)","臨官(大吉)","帝旺(大吉)","衰(弱)","病(弱)","死(凶)","墓(吉)","絕(凶)","胎(平)","養(平)"],this.yyss=["異","同"],this.sxss=["生我","同我","我生","我克","克我"],this.cfw=["　中　","　北　","北北東","東北東","　東　","東南東","南南東","　南　","南南西","西南西","　西　","西北西","北北西"],this.csj=["旺四季","　春　","　夏　","　秋　","　冬　"],this.fwtg=[4,4,7,7,0,0,10,10,1,1],this.fwdz=[1,2,3,4,5,6,7,8,9,10,11,12],this.sjtg=[1,1,2,2,0,0,3,3,4,4],this.sjdz=[1,1,2,2,2,3,3,3,4,4,4,1],this.logs=function(t,i){var a=new Array;if(a[0]="超出計算能力",a[1]="適用於西元-1000年至西元3000年,超出此範圍誤差較大",a[2]="对应的干支不存在",a[3]="干支非六十甲子",a[4]="日期超出範圍",a[5]="日期錯誤",a[6]="月份錯誤",a[7]="此年非閏年",a[8]="此月非閏月",a[9]="不存在的时间",a[10]="参数非整数字符串",a[11]="参数非整数类型",a[12]="参数非浮点类型",a[13]="月份超出範圍",a[14]="此年無閏月",a[15]="参数非整数",a[16]="参数非数字",this.debug){var r=void 0===a[t]?t:a[t];r+=void 0===i?"":":"+i,console.log(r)}return!1},this.intval=function(t,i){var a,r,s=void 0===t?"undefined":_typeof(t);return"boolean"===s?+t:"string"===s?(0===i&&(r=t.match(/^\s*0(x?)/i),i=r?r[1]?16:8:10),a=parseInt(t,i||10),isNaN(a)||!isFinite(a)?(this.logs(15,a),0):a):"number"===s&&isFinite(t)?t<0?Math.ceil(t):Math.floor(t):(this.logs(15,t),0)},this.floatval=function(t){var i=parseFloat(t);return isNaN(i)&&this.logs(16,t),i||0},this.boolval=function(t){return!1!==t&&(0!==t&&0!==t&&(""!==t&&"0"!==t&&((!Array.isArray(t)||0!==t.length)&&(null!==t&&void 0!==t))))},this.cn=function(t){return Math.cos(.0174532925199433*t)},this.sn=function(t){return Math.sin(.0174532925199433*t)},this.fpart=function(t){return t-=Math.floor(t),t<0&&(t+=1),t},this.ipart=function(t){return t/Math.abs(t)*Math.floor(Math.abs(t))},this.quad=function(t,i,a){var r=0,s=.5*(t+a)-i,h=.5*(a-t),e=i,n=-h/(2*s),o=(s*n+h)*n+e,l=h*h-4*s*e;if(l>0){var f=.5*Math.sqrt(l)/Math.abs(s),v=n-f,M=n+f;Math.abs(v)<=1&&(r+=1),Math.abs(M)<=1&&(r+=1),v<-1&&(v=M)}return Array(n,o,v,M,r)},this.sinalt=function(t,i,a){var r=(t-51544.5)/36525,s=2*Math.PI,h=s*this.fpart(.993133+99.997361*r),e=6893*Math.sin(h)+72*Math.sin(2*h),n=s*this.fpart(.7859453+h/s+(6191.2*r+e)/1296e3),o=Math.sin(n),l=Math.cos(n),f=.91748*o,v=.39778*o,M=Math.sqrt(1-v*v),y=360/s*Math.atan(v/M),u=48/s*Math.atan(f/(l+M));u<0&&(u+=24);var c=this.ipart(t),d=24*(t-c),w=(c-51544.5)/36525,g=6.697374558+1.0027379093*d;g+=(8640184.812866+(.093104-62e-7*w)*w)*w/3600;var A=24*this.fpart((g-i/15)/24),P=15*(A-u),I=this.sn(-50/60);return this.sn(a)*this.sn(y)+this.cn(a)*this.cn(y)*this.cn(P)-I},this.zty=function(t,i,a){var t=this.floatval(t),i=void 0===i?-1*this.J:-1*this.floatval(i),a=void 0===a?1*this.W:1*this.floatval(a),r=Math.round(t)-2400001-this.J/360,s=0,h=0,e=0,n=0,o=1,l=this.sinalt(r+(o-1)/24,i,a);do{var f=this.sinalt(r+(o+0)/24,i,a),v=this.sinalt(r+(o+1)/24,i,a),M=this.quad(l,f,v),y=_slicedToArray(M,5),u=(y[0],y[1]),c=y[2],d=y[3];switch(y[4]){case 0:break;case 1:l<0?(s=1,h=o+c):(e=1,n=o+c);break;case 2:u<0?(h=o+d,n=o+c):(h=o+c,n=o+d),s=1,e=1,1}l=v,o+=2}while(o<25&&s*e==0);if(s*e==0)return t;for(;n<h;)n+=24;return t-(h+(n-h)/2-12)/24},this.Jdays=function(t,i,a,r,s,h){var t=this.floatval(t),i=this.floatval(i),a=this.floatval(a),r=this.floatval(r),s=void 0===s?0:this.floatval(s),h=void 0===h?0:this.floatval(h);if(t<-7e3||t>7e3)return this.logs(0),!1;var e=t+Math.floor((i-3)/10);if(t>1582||1582==t&&i>10||1582==t&&10==i&&a>=15)var n=1721119.5,o=Math.floor(365.25*e)-Math.floor(e/100)+Math.floor(e/400);else{if(!(t<1582||1582==t&&i<10||1582==t&&10==i&&a<=4))return this.logs(9),!1;var n=1721117.5,o=Math.floor(365.25*e)}var l=Math.floor(i+9)%12,f=30*l+Math.floor(34*(l+1)/57),v=a-1;return r+=(h/60+s)/60,o+f+v+r/24+n},this.Jtime=function(t){var t=this.floatval(t);if(t>=2299160.5)var i=146097,a=1721119.5;else var i=146100,a=1721117.5;var r=Math.floor(t-a),s=i/4,h=Math.floor((r+.75)/s),e=Math.floor(r+.75-h*s),n=Math.floor((e+.75)/365.25);e=Math.floor(e+.75-365.25*n+1);var o=Math.floor((e-.5)/30.6);e=Math.floor(e-.5-30.6*o+1);var l=100*h+n,f=(o+2)%12+1;f<3&&(l+=1);var v=Math.floor(24*(t+.5-Math.floor(t+.5))*60*60+5e-5),M=Math.floor(v/60),y=v%60,u=Math.floor(M/60),c=M%60,d=Math.floor(l),w=Math.floor(f),g=Math.floor(e);return Array(d,w,g,u,c,y)},this.ValidDate=function(t,i,a){var r=!0;if(i<=0||i>12)this.logs(13),r=!1;else{var s=-(t%4==0),h=(t%400==0)-(t%100==0)&&t>1582,e=s+h,n=30+(Math.abs(i-7.5)+.5)%2-(2==i)*(2+e);(a<=0||a>n)&&(0==e&&2==i&&29==a?this.logs(14):this.logs(4),r=!1)}return 1582==t&&10==i&&a>=5&&a<15&&(this.logs(9),r=!1),r},this.VE=function(t){var i=this.intval(t);if(i>=1e3&&i<=8001)var a=(i-2e3)/1e3,r=2451623.80984+365242.37404*a+.05169*a*a-.00411*a*a*a-57e-5*a*a*a*a;else{if(!(i>=-8e3&&i<1e3))return this.logs(0),!1;var a=i/1e3,r=1721139.29189+365242.1374*a+.06134*a*a+.00111*a*a*a-71e-5*a*a*a*a}return r},this.MeanJQJD=function(t){var i,t=this.intval(t),a=new Array,r=this.VE(t),s=this.VE(t+1)-r,h=2*Math.PI/24,e=(r-2451545)/365250,n=.0167086342-.0004203654*e-126734e-10*e*e+1.444e-7*e*e*e-2e-10*e*e*e*e+3e-10*e*e*e*e*e,o=t/1e3,l=111.25586939-17.0119934518333*o-.044091890166673*o*o-.000437356166661345*o*o*o+816716666602386e-20*o*o*o*o,f=2*l*Math.PI/360,v=new Array(30);for(i=1;i<=24;i++){var M=0,y=h*(i-1)+f;y>Math.PI&&y<=3*Math.PI&&(y=2*Math.PI-y,M=1),y>3*Math.PI&&(y=4*Math.PI-y,M=2);var u=2*Math.atan(Math.sqrt((1-n)/(1+n))*Math.tan(y/2)),c=n*Math.sqrt(1-n*n)*Math.sin(y)/(1+n*Math.cos(y)),d=(u-c)*s/2/Math.PI;1==M&&(d=s-d),2==M&&(d=2*s-d),v[i]=d}for(i=1;i<=24;i++)a[i-1]=r+v[i]-v[1];return a},this.Perturbation=function(t){for(var t=this.floatval(t),i=new Array(485,203,199,182,156,136,77,74,70,58,52,50,45,44,29,18,17,16,14,12,12,12,9,8),a=new Array(324.96,337.23,342.08,27.85,73.14,171.52,222.54,296.72,243.58,119.81,297.17,21.02,247.54,325.15,60.93,155.12,288.79,198.04,199.76,95.39,287.11,320.81,227.73,15.45),r=new Array(1934.136,32964.467,20.186,445267.112,45036.886,22518.443,65928.934,3034.906,9037.513,33718.147,150.678,2281.226,29929.562,31555.956,4443.417,67555.328,4562.452,62894.029,31436.921,14577.848,31931.756,34777.259,1222.114,16859.074),s=(t-2451545)/36525,h=0,e=0;e<=23;e++)h+=i[e]*Math.cos(2*a[e]*Math.PI/360+2*r[e]*Math.PI/360*s);var n=35999.373*s-2.47;return 1e-5*h/(1+.0334*Math.cos(2*n*Math.PI/360)+7e-4*Math.cos(2*n*2*Math.PI/360))},this.DeltaT=function(t,i){var a,r,s,h,t=this.intval(t),i=this.intval(i);return h=t+(i-.5)/12,h<=-500?(a=(h-1820)/100,s=32*a*a-20):h<500?(a=h/100,s=10583.6-1014.41*a+33.78311*a*a-5.952053*a*a*a-.1798452*a*a*a*a+.022174192*a*a*a*a*a+.0090316521*a*a*a*a*a*a):h<1600?(a=(h-1e3)/100,s=1574.2-556.01*a+71.23472*a*a+.319781*a*a*a-.8503463*a*a*a*a-.005050998*a*a*a*a*a+.0083572073*a*a*a*a*a*a):h<1700?(r=h-1600,s=120-.9808*r-.01532*r*r+r*r*r/7129):h<1800?(r=h-1700,s=8.83+.1603*r-.0059285*r*r+13336e-8*r*r*r-r*r*r*r/1174e3):h<1860?(r=h-1800,s=13.72-.332447*r+.0068612*r*r+.0041116*r*r*r-37436e-8*r*r*r*r+121272e-10*r*r*r*r*r-1.699e-7*r*r*r*r*r*r+8.75e-10*r*r*r*r*r*r*r):h<1900?(r=h-1860,s=7.62+.5737*r-.251754*r*r+.01680668*r*r*r-.0004473624*r*r*r*r+r*r*r*r*r/233174):h<1920?(r=h-1900,s=1.494119*r-2.79-.0598939*r*r+.0061966*r*r*r-197e-6*r*r*r*r):h<1941?(r=h-1920,s=21.2+.84493*r-.0761*r*r+.0020936*r*r*r):h<1961?(r=h-1950,s=29.07+.407*r-r*r/233+r*r*r/2547):h<1986?(r=h-1975,s=45.45+1.067*r-r*r/260-r*r*r/718):h<2005?(r=h-2e3,s=63.86+.3345*r-.060374*r*r+.0017275*r*r*r+651814e-9*r*r*r*r+2373599e-11*r*r*r*r*r):h<2050?(r=h-2e3,s=62.92+.32217*r+.005589*r*r):h<2150?(a=(h-1820)/100,s=32*a*a-20-.5628*(2150-h)):(a=(h-1820)/100,s=32*a*a-20),(h<1955||h>=2005)&&(s-=12932e-9*(h-1955)*(h-1955)),s/60},this.GetAdjustedJQ=function(t){var t=this.intval(t);if(this.JQ&&this.JQ[t])return this.JQ[t];for(var i=new Array,a=this.MeanJQJD(t),r=0;r<24;r++){var s=this.Perturbation(a[r]),h=this.DeltaT(t,Math.ceil(r/2)+3);i[r]=a[r]+s-h/60/24,i[r]=i[r]+8/24}return this.JQ[t]=i,i},this.GetZQsinceWinterSolstice=function(t){var t=this.intval(t),i=new Array,a=new Array(26);a=this.GetAdjustedJQ(t-1),i[0]=a[18],i[1]=a[20],i[2]=a[22],a=this.GetAdjustedJQ(t);for(var r=0;r<12;r++)i[r+3]=a[2*r];return a=this.GetAdjustedJQ(t+1),i[15]=a[0],i},this.GetPureJQsinceSpring=function(t){var t=this.intval(t),i=new Array,a=this.GetAdjustedJQ(t-1);i[0]=a[21],i[1]=a[23],a=this.GetAdjustedJQ(t);for(var r=0;r<12;r++)i[r+2]=a[2*r+1];return a=this.GetAdjustedJQ(t+1),i[14]=a[1],i},this.MeanNewMoon=function(t){var i,a,t=this.floatval(t),r=Math.floor((t-2451550.09765)/this.synmonth);return a=2451550.09765+r*this.synmonth,i=(a-2451545)/36525,a+1337e-7*i*i-1.5e-7*i*i*i+7.3e-10*i*i*i*i,r},this.TrueNewMoon=function(t){var i,a,r,s,h,e,n,o,l,f,v,M,y,t=this.intval(t);return y=2451550.09765+t*this.synmonth,i=(y-2451545)/36525,a=i*i,r=a*i,s=r*i,f=y+1337e-7*a-1.5e-7*r+7.3e-10*s,h=2.5534+29.10535669*t-218e-7*a-1.1e-7*r,e=201.5643+385.81693528*t+.0107438*a+1239e-8*r-5.8e-8*s,n=160.7108+390.67050274*t-.0016341*a-227e-8*r+1.1e-8*s,o=124.7746-1.5637558*t+.0020691*a+215e-8*r,l=1-.002516*i-74e-7*a,v=-.4072*Math.sin(Math.PI/180*e),v+=.17241*l*Math.sin(Math.PI/180*h),v+=.01608*Math.sin(Math.PI/180*2*e),v+=.01039*Math.sin(Math.PI/180*2*n),v+=.00739*l*Math.sin(Math.PI/180*(e-h)),v-=.00514*l*Math.sin(Math.PI/180*(e+h)),v+=.00208*l*l*Math.sin(Math.PI/180*(2*h)),v-=.00111*Math.sin(Math.PI/180*(e-2*n)),v-=57e-5*Math.sin(Math.PI/180*(e+2*n)),v+=56e-5*l*Math.sin(Math.PI/180*(2*e+h)),v-=42e-5*Math.sin(Math.PI/180*3*e),v+=42e-5*l*Math.sin(Math.PI/180*(h+2*n)),v+=38e-5*l*Math.sin(Math.PI/180*(h-2*n)),v-=24e-5*l*Math.sin(Math.PI/180*(2*e-h)),v-=17e-5*Math.sin(Math.PI/180*o),v-=7e-5*Math.sin(Math.PI/180*(e+2*h)),v+=4e-5*Math.sin(Math.PI/180*(2*e-2*n)),v+=4e-5*Math.sin(Math.PI/180*(3*h)),v+=3e-5*Math.sin(Math.PI/180*(e+h-2*n)),v+=3e-5*Math.sin(Math.PI/180*(2*e+2*n)),v-=3e-5*Math.sin(Math.PI/180*(e+h+2*n)),v+=3e-5*Math.sin(Math.PI/180*(e-h+2*n)),v-=2e-5*Math.sin(Math.PI/180*(e-h-2*n)),v-=2e-5*Math.sin(Math.PI/180*(3*e+h)),v+=2e-5*Math.sin(Math.PI/180*(4*e)),M=325e-6*Math.sin(Math.PI/180*(299.77+.107408*t-.009173*a)),M+=165e-6*Math.sin(Math.PI/180*(251.88+.016321*t)),M+=164e-6*Math.sin(Math.PI/180*(251.83+26.651886*t)),M+=126e-6*Math.sin(Math.PI/180*(349.42+36.412478*t)),M+=11e-5*Math.sin(Math.PI/180*(84.66+18.206239*t)),M+=62e-6*Math.sin(Math.PI/180*(141.74+53.303771*t)),M+=6e-5*Math.sin(Math.PI/180*(207.14+2.453732*t)),M+=56e-6*Math.sin(Math.PI/180*(154.84+7.30686*t)),M+=47e-6*Math.sin(Math.PI/180*(34.52+27.261239*t)),M+=42e-6*Math.sin(Math.PI/180*(207.19+.121824*t)),M+=4e-5*Math.sin(Math.PI/180*(291.34+1.844379*t)),M+=37e-6*Math.sin(Math.PI/180*(161.72+24.198154*t)),M+=35e-6*Math.sin(Math.PI/180*(239.56+25.513099*t)),M+=23e-6*Math.sin(Math.PI/180*(331.55+3.592518*t)),f+v+M},this.GetSMsinceWinterSolstice=function(t){var i,a,r,s,i,t=this.intval(t),h=new Array,e=new Array,n=this.GetAdjustedJQ(t-1),o=n[18];for(s=this.Jdays(t-1,11,0,0),i=this.MeanNewMoon(s),a=0;a<=19;a++)r=i+a,e[a]=this.TrueNewMoon(r)+8/24,e[a]=e[a]-this.DeltaT(t,a-1)/1440;for(var l=0;l<=18&&!(Math.floor(e[l]+.5)>Math.floor(o+.5));l++);var f={1804:{8:-310},1831:{4:-61},1842:{1:-904},1863:{1:-107},1880:{11:293},1896:{2:-751},1914:{12:-102},1916:{2:-315},1920:{11:-289}},v=l;for(r=0;r<=15;r++)h[r]=e[v-1+r],f[t]&&f[t][r]&&(h[r]+=f[t][r]/86400);return h},this.GetZQandSMandLunarMonthCode=function(t){var i,t=this.intval(t),a=new Array,r=this.GetZQsinceWinterSolstice(t),s=this.GetSMsinceWinterSolstice(t);if(i=0,a[0]=0,Math.floor(r[12]+.5)>=Math.floor(s[13]+.5))for(var h=1;h<=14;h++)Math.floor(s[h]+.5>Math.floor(r[h-1-i]+.5)&&Math.floor(s[h+1]+.5)<=Math.floor(r[h-i]+.5))?(a[h]=h-.5,i=1):a[h]=h-i;else{for(var h=1;h<=12;h++)a[h]=h;for(var h=13;h<=14;h++)Math.floor(s[h]+.5>Math.floor(r[h-1-i]+.5)&&Math.floor(s[h+1]+.5)<=Math.floor(r[h-i]+.5))?(a[h]=h-.5,i=1):a[h]=h-i}return a},this.Lunar2Solar=function(t,i,a,r){var s,h,e,n,t=this.intval(t),i=this.intval(i),a=this.intval(a),r=this.boolval(r),o=new Array,l=new Array,f=new Array;if(t<-7e3||t>7e3)return this.logs(0),!1;(t<-1e3||t>3e3)&&this.logs(1),o=this.GetSMsinceWinterSolstice(t),l=this.GetZQandSMandLunarMonthCode(t),s=0;for(var v=1;v<=14;v++)if(l[v]-Math.floor(l[v])>0){s=Math.floor(l[v]+.5);break}n=i+2;for(var M=0;M<=14;M++)f[M]=Math.floor(o[M+1]+.5)-Math.floor(o[M]+.5);return h=0,n>=3&&n<=14?a>=1&&a<=30?1==r?s<3?(h=1,this.logs(7)):s!=n?(h=1,this.logs(8)):a<=f[n]?e=o[n]+a-1:(h=1,this.logs(4)):0==s?a<=f[n-1]?e=o[n-1]+a-1:(h=1,this.logs(4)):a<=f[n+(n>s)-1]?e=o[n+(n>s)-1]+a-1:(h=1,this.logs(4)):(h=1,this.logs(5)):(h=1,this.logs(6)),!h&&this.Jtime(e).slice(0,3)},this.Solar2Lunar=function(t,i,a){var r,t=this.intval(t),i=this.intval(i),a=this.intval(a),s=new Array,h=new Array,e=0;if(t<-7e3||t>7e3)return this.logs(0),!1;if((t<-1e3||t>3e3)&&this.logs(1),!1===this.ValidDate(t,i,a))return!1;s=this.GetSMsinceWinterSolstice(t),h=this.GetZQandSMandLunarMonthCode(t);var n=this.Jdays(t,i,a,12);Math.floor(n)<Math.floor(s[0]+.5)&&(e=1,s=this.GetSMsinceWinterSolstice(t-1),h=this.GetZQandSMandLunarMonthCode(t-1));for(var o=0;o<=14;o++)if(Math.floor(n)>=Math.floor(s[o]+.5)&&Math.floor(n)<Math.floor(s[o+1]+.5)){var l=o;break}var f=Math.floor(n)-Math.floor(s[l]+.5)+1;if(h[l]<2||1==e)var v=t-1;else var v=t;if(2*(h[l]-Math.floor(h[l]))+1==1)var M=!1;else var M=!0;return r=Math.floor(h[l]+10)%12+1,Array(v,r,f,M)},this.GetWeek=function(t,i,a){var t=this.intval(t),i=this.intval(i),a=this.intval(a),r=this.Jdays(t,i,a,12,0,0);return!1!==r&&(Math.floor(r+1)%7+7)%7},this.GetSolarDays=function(t,i){var t=this.intval(t),i=this.intval(i);if(i<1||i>12)return this.logs(13),0;if(1582==t&&10==i)return 21;var a=-(t%4==0),r=(t%400==0)-(t%100==0)&&t>1582,s=a+r;return 30+(Math.abs(i-7.5)+.5)%2-(2==i)*(2+s)},this.GetLunarDays=function(t,i,a){var r,s,h,t=this.intval(t),i=this.intval(i),a=this.boolval(a),e=new Array,n=new Array,o=new Array;if(t<-7e3||t>7e3)return this.logs(0),!1;(t<-1e3||t>3e3)&&this.logs(1),e=this.GetSMsinceWinterSolstice(t),n=this.GetZQandSMandLunarMonthCode(t),r=0;for(var l=1;l<=14;l++)if(n[l]-Math.floor(n[l])>0){r=Math.floor(n[l]+.5);break}h=i+2;for(var f=0;f<=14;f++)o[f]=Math.floor(e[f+1]+.5)-Math.floor(e[f]+.5);if(s=0,h>=3&&h<=14)if(1==a)if(r<3)s=1,this.logs(7);else if(r!=h)s=1,this.logs(8);else var v=o[h];else if(0==r)var v=o[h-1];else var v=o[h+(h>r)-1];else s=1,this.logs(6);return!s&&v},this.GetRunyue=function(t){for(var t=this.intval(t),i=this.GetZQandSMandLunarMonthCode(t),a=0,r=1;r<=14;r++)if(i[r]-Math.floor(i[r])>0){a=Math.floor(i[r]+.5);break}return Math.max(0,a-2)},this.GetXZ=function(t,i,a,r,s,h){var t=this.intval(t),i=this.intval(i),a=this.intval(a),r=this.intval(r),s=void 0===s?0:this.intval(s),h=void 0===h?0:this.intval(h);if(!1===this.ValidDate(t,i,a))return!1;var e=this.Jdays(t,i,a,r,s,h);if(!1===e)return!1;var n=this.GetZQsinceWinterSolstice(t);if(e<n[0])var n=this.GetZQsinceWinterSolstice(t-1);for(var o=0;o<=13;o++)if(e<n[o]){var l=(o+12-1)%12;break}return l},this.GetGZ=function(t,i,a,r,s,h){var t=this.floatval(t),i=this.floatval(i),a=this.floatval(a),r=this.floatval(r),s=void 0===s?0:this.floatval(s),h=void 0===h?0:this.floatval(h);if(s+h==0&&(h=10),!1===this.ValidDate(t,i,a))return!1;var e=this.Jdays(t,i,a,r,s,h);if(!1===e)return!1;var n=new Array,o=t;n=this.GetPureJQsinceSpring(t),e<n[0]&&(o=t-1,n=this.GetPureJQsinceSpring(o));var l=new Array,f=new Array,v=((o+4712+24)%60+60)%60;l[0]=v%10,f[0]=v%12;for(var M=0;M<=13;M++)if(n[M]>=e){var y=M-1;break}var u=(12*(o+4712)+y+60)%60,c=(u+50)%60;l[1]=c%10,f[1]=c%12;var d=e+.5,w=86400*(d-Math.floor(d))+3600,g=Math.floor(d)+w/86400,A=(Math.floor(g+49)%60+60)%60;l[2]=A%10,f[2]=A%12,this.zwz&&r>=23&&(l[2]=(l[2]+10-1)%10,f[2]=(f[2]+12-1)%12);var P=12*g,I=(Math.floor(P+48)%60+60)%60;return l[3]=I%10,f[3]=I%12,Array(l,f)},this.MGZ=function(t){for(var t=this.intval(t),i=new Array,a=2+t%10*12,r=0;r<=11;r++){var s=(r+a)%60;i[s]=this.gz[s]}return i},this.HGZ=function(t){for(var t=this.intval(t),i=new Array,a=t%10*12,r=0;r<=(this.zwz?12:11);r++){var s=(r+a)%60;i[s]=this.gz[s]+(12==r?"+":"")}return i},this.GZ=function(t,i){var t=this.intval(t),i=this.intval(i);return t<0||t>59?(this.logs(3,11),!1):i<0||i>59?(this.logs(3,12),!1):t%2!=i%2?(this.logs(3,13),!1):(10+t-i)%10/2*12+i},this.gz2gl=function(t,i,a,r,s,h){var t=this.intval(t),i=this.intval(i),a=this.intval(a),r=this.intval(r),s=this.intval(s),h=this.intval(h);if(t<0||t>=60)return this.logs(3,0),!1;if(i<0||i>=60)return this.logs(3,1),!1;if(a<0||a>=60)return this.logs(3,2),!1;if(r<0||r>=60)return this.logs(3,3),!1;if(!(i in this.MGZ(t)))return this.logs(2,0),!1;if(!(r in this.HGZ(a)))return this.logs(2,1),!1;var e=this.HGZ(a);this.zwz&&"+"==e[r].substr(-1)&&(a=(a+1)%60);var n=s+60*h;(s<-1e3||n>3e3)&&this.logs(1);for(var o=new Array,l=0;l<=h-1;l++){var f=s+60*l,v=(f+56)%60,M=(t+60-v)%60,y=f+M,u=this.GetPureJQsinceSpring(y),c=(i+60-2)%12,d=u[c],w=u[c+1],g=(Math.floor(d)+49)%60,A=(a+60-g)%60,P=Math.floor(d+A),I=r%12,z=P+(2*I-13)/24,G=P+(2*I-11)/24;if(G<d||z>w);else{if(z>d&&G<w)var b=z,J=G;if(z<d&&G>d)var b=d,J=G;if(z<w&&G>w)var b=z,J=w;o.push([this.Jtime(b),this.Jtime(J)])}}return o},this.fatemaps=function(t,i,a,r,s,h,e,n,o){var t=this.intval(t)?1:0,i=this.intval(i),a=this.intval(a),r=this.intval(r),s=this.intval(s),h=void 0===h?0:this.intval(h),e=void 0===e?0:this.intval(e);(i<-1e3||i>3e3)&&this.logs(1);var l=this.Jdays(i,a,r,s,h,e);if(!1===l)return!1;var f=new Array;void 0!==n&&(f.pty=l+4*(this.floatval(n)-this.J)*60/86400,f.pty=this.Jtime(f.pty),l=this.zty(l,n,o),f.zty=this.Jtime(l));var v=this.Jtime(l),M=_slicedToArray(v,6),i=M[0],a=M[1],r=M[2],s=M[3],h=M[4],e=M[5],y=365.24244475,u=new Array(0,0,0,0,0),c=new Array(0,0),d=new Array(1,6,10,9,10,9,7,0,4,3),w=i,g=this.GetPureJQsinceSpring(w);l<g[0]&&(w=i-1,g=this.GetPureJQsinceSpring(w));for(var A=this.GetGZ(i,a,r,s,h,e),P=_slicedToArray(A,2),I=P[0],z=P[1],G=new Array,b=new Array,J=new Array,S=new Array,p=0;p<=3;p++)G[p]=I[p]%2,c[G[p]]=c[G[p]]+1,b[p]=z[p]%2,c[b[p]]=c[b[p]]+1,J[p]=this.wxtg[I[p]],u[J[p]]=u[J[p]]+1,S[p]=this.wxdz[z[p]],u[S[p]]=u[S[p]]+1;f.nyy=c,f.nwx=u,f.yytg=G,f.yydz=b,f.ewxtg=J,f.ewxdz=S;for(var Q=new Array,m=new Array,x=new Array,Z=new Array,W=0;W<=3;W++){m[W]=new Array,x[W]=new Array;for(var j=0;j<=2;j++){var k=this.zcg[z[W]][j];k>=0?(Z[3*W+j]=this.ctg[k],Q[3*W+j]=this.sss[this.dgs[k][I[2]]],m[W][j]=this.wxtg[k],x[W][j]=k%2):(Z[3*W+j]="",Q[3*W+j]="")}}f.bctg=Z,f.bzcg=Q,f.wxcg=m,f.yycg=x;for(var W=0;W<=14;W++)if(g[W]>l){var q=W-1;break}var D=l-g[q],L=g[q+1]-l;if(0==t&&0==G[0]||1==t&&1==G[0])var T=10*y*(L/(L+D)),N=0;else var T=10*y*(D/(L+D)),N=1;var _=l+T,V=this.Jtime(_),C=V[0];if(f.qyy=C,f.qyy_desc="出生后"+this.intval(T/y)+"年"+this.intval(T%y/(y/12))+"个月"+this.intval(T%y%(y/12))+"天起运",_>=this.GetPureJQsinceSpring(C)[0])var E=C;else var E=C-1;var F=((E+4712+24)%10+10)%10;F=this.ctg[((E+4712+24)%10+10)%10]+" "+this.ctg[((E+4712+24+5)%10+10)%10],f.qyy_desc2="每逢 "+F+" 年"+V[1]+"月"+V[2]+"日交大運";var H=E-w;f.dy=new Array;for(var O=new Array,R=new Array,X=new Array,B=new Array,K=new Array,U=new Array,Y=new Array,$=(10+I[1]-z[1])%10/2*12+z[1],p=0;p<=8;p++)void 0===f.dy[p]&&(f.dy[p]=new Array),f.dy[p].zqage=O[p]=H+1+10*p,f.dy[p].zboz=R[p]=H+1+10*p+9,f.dy[p].syear=C+10*p,f.dy[p].eyear=C+10*p+9,f.dy[p].zfman=X[p]=($+60+Math.pow(-1,N)*(p+1))%10,f.dy[p].zfmbn=B[p]=($+60+Math.pow(-1,N)*(p+1))%12,f.dy[p].zfma=K[p]=this.ctg[X[p]],f.dy[p].zfmb=U[p]=this.cdz[B[p]],f.dy[p].nzs=Y[p]=(24+d[I[2]]+Math.pow(-1,I[2])*(B[0]+Math.pow(-1,N)*p))%12,f.dy[p].nzsc=this.czs[Y[p]];for(var tt=new Array,it=new Array,at=new Array,j=0;j<=89;j++){var p=this.intval(j/10),W=j%10;void 0===f.dy[p].ly&&(f.dy[p].ly=new Array),void 0===f.dy[p].ly[W]&&(f.dy[p].ly[W]=new Array),f.dy[p].ly[W].age=j+H+1,f.dy[p].ly[W].year=j+H+w,f.dy[p].ly[W].lyean=tt[j]=(I[0]+j+H)%10,f.dy[p].ly[W].lyebn=it[j]=(z[0]+j+H)%12,f.dy[p].ly[W].lye=at[j]=this.ctg[tt[j]]+this.cdz[it[j]]}var rt=this.GetZQsinceWinterSolstice(i);if(l<rt[0])var rt=this.GetZQsinceWinterSolstice(i-1);for(var W=0;W<=13;W++)if(l<rt[W]){var st=(W+12-1)%12;break}f.mz=this.mz[t],f.xb=this.xb[t],f.gl=[i,a,r],f.nl=this.Solar2Lunar(i,a,r),f.tg=I,f.dz=z,f.sz=new Array,f.ctg=new Array,f.cdz=new Array;for(var W=0;W<=3;W++)f.sz[W]=this.ctg[I[W]]+this.cdz[z[W]],f.ctg[W]=this.ctg[I[W]],f.cdz[W]=this.cdz[z[W]];return f.sx=this.csx[z[0]],f.xz=this.cxz[st],f.cyy=this.cyy[G[2]],f}}var _slicedToArray=function(){function t(t,i){var a=[],r=!0,s=!1,h=void 0;try{for(var e,n=t[Symbol.iterator]();!(r=(e=n.next()).done)&&(a.push(e.value),!i||a.length!==i);r=!0);}catch(t){s=!0,h=t}finally{try{!r&&n.return&&n.return()}finally{if(s)throw h}}return a}return function(i,a){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window.p=new paipan;